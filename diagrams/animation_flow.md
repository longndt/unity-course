# Unity Animation Flow & State Machine

## ðŸŽ¯ Overview

This diagram illustrates Unity's animation system workflow, showing how Animator Controllers, state machines, and animation events work together to create smooth character animations.

## ðŸ“Š Animation System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Animation System                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Sprite Import Pipeline                       â”‚
â”‚                                                             â”‚
â”‚  Sprite Sheet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Import Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Texture Type: Sprite (2D and UI)                â”‚  â”‚   â”‚
â”‚  â€¢ Pixels Per Unit: 16-100                         â”‚  â”‚   â”‚
â”‚  â€¢ Sprite Mode: Multiple                           â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  Sprite Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Slice Type: Automatic/Grid/Manual           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Pivot: Center/Bottom/Custom                 â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Mesh Type: Tight/Full Rect                  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  Individual Sprites â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Idle_1, Idle_2, Idle_3                  â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Walk_1, Walk_2, Walk_3                  â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Jump_1, Jump_2, Jump_3                  â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Attack_1, Attack_2, Attack_3            â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚   â”‚
â”‚                                               â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚                                                   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Animator Controller Setup                    â”‚
â”‚                                                             â”‚
â”‚  Animator Controller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Parameters â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Speed (Float)                                   â”‚  â”‚   â”‚
â”‚  â€¢ IsGrounded (Bool)                               â”‚  â”‚   â”‚
â”‚  â€¢ IsJumping (Bool)                                â”‚  â”‚   â”‚
â”‚  â€¢ Attack (Trigger)                                â”‚  â”‚   â”‚
â”‚  â€¢ Direction (Float)                               â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  States â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Idle State                                  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Walk State                                  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Run State                                   â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Jump State                                  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Attack State                                â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Death State                                 â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  Transitions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Idle â†’ Walk (Speed > 0.1)               â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Walk â†’ Run (Speed > 2.0)                â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Any â†’ Jump (Jump pressed)                â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Jump â†’ Idle (IsGrounded = true)          â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Any â†’ Attack (Attack triggered)          â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚   â”‚
â”‚                                               â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚                                                   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Animation Event Flow                         â”‚
â”‚                                                             â”‚
â”‚  Animation Clip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Timeline â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚   â”‚
â”‚  â”‚  Frame 0: Idle_1                            â”‚   â”‚  â”‚   â”‚
â”‚  â”‚  Frame 5: Idle_2                            â”‚   â”‚  â”‚   â”‚
â”‚  â”‚  Frame 10: Idle_3                           â”‚   â”‚  â”‚   â”‚
â”‚  â”‚  Frame 15: Idle_1 (Loop)                    â”‚   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  Animation Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnFootstep (Frame 5, 15)                    â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnAttackHit (Frame 8)                       â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnAnimationComplete (Frame 15)              â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  Script Methods â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  public void OnFootstep() {                â”‚  â”‚  â”‚  â”‚   â”‚
â”‚      // Play footstep sound                â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  }                                          â”‚  â”‚  â”‚  â”‚   â”‚
â”‚                                             â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  public void OnAttackHit() {                â”‚  â”‚  â”‚  â”‚   â”‚
â”‚      // Deal damage to enemies              â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  }                                          â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚   â”‚
â”‚                                               â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚                                                   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Runtime Animation Flow                       â”‚
â”‚                                                             â”‚
â”‚  Script Updates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  animator.SetFloat("Speed", velocity.magnitude);       â”‚   â”‚
â”‚  animator.SetBool("IsGrounded", isGrounded);           â”‚   â”‚
â”‚  animator.SetTrigger("Attack");                        â”‚   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Animator Controller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Check Parameters                                â”‚  â”‚   â”‚
â”‚  â€¢ Evaluate Transitions                            â”‚  â”‚   â”‚
â”‚  â€¢ Change States                                   â”‚  â”‚   â”‚
â”‚  â€¢ Play Animation Clips                            â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  SpriteRenderer Updates â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Change Sprite                                â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Update Sorting Order                         â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Handle Flipping                              â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  Animation Events Triggered â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnFootstep() called                     â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnAttackHit() called                    â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ OnAnimationComplete() called            â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                       â”‚  â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚   â”‚
â”‚                                               â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚                                                   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸŽ® State Machine Patterns

### **Basic State Machine**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    State Machine                            â”‚
â”‚                                                             â”‚
â”‚  Idle State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  â€¢ Play Idle Animation                                 â”‚   â”‚
â”‚  â€¢ Check for Input                                     â”‚   â”‚
â”‚  â€¢ Transition to Walk if Speed > 0.1                   â”‚   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Walk State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Play Walk Animation                             â”‚  â”‚   â”‚
â”‚  â€¢ Check for Input                                 â”‚  â”‚   â”‚
â”‚  â€¢ Transition to Run if Speed > 2.0                â”‚  â”‚   â”‚
â”‚  â€¢ Transition to Idle if Speed < 0.1               â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  Run State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Play Run Animation                          â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Check for Input                             â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Transition to Walk if Speed < 2.0           â”‚  â”‚  â”‚   â”‚
â”‚  â€¢ Transition to Idle if Speed < 0.1           â”‚  â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚  â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚  â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚                                                   â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Jump State Machine**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Jump State Machine                       â”‚
â”‚                                                             â”‚
â”‚  Any State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  â€¢ Check Jump Input                                    â”‚   â”‚
â”‚  â€¢ Check IsGrounded                                    â”‚   â”‚
â”‚  â€¢ Transition to Jump if conditions met                â”‚   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  Jump State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Play Jump Animation                             â”‚  â”‚   â”‚
â”‚  â€¢ Apply Jump Force                                â”‚  â”‚   â”‚
â”‚  â€¢ Check for Landing                               â”‚  â”‚   â”‚
â”‚  â€¢ Transition to Idle when IsGrounded = true       â”‚  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”§ Common Animation Patterns

### **Direction Flipping**
```csharp
public class CharacterController : MonoBehaviour {
    private SpriteRenderer spriteRenderer;
    private Animator animator;

    void Update() {
        float horizontal = Input.GetAxis("Horizontal");

        if (horizontal > 0) {
            spriteRenderer.flipX = false;
        } else if (horizontal < 0) {
            spriteRenderer.flipX = true;
        }

        animator.SetFloat("Speed", Mathf.Abs(horizontal));
    }
}
```

### **Speed-Based Animation**
```csharp
public class PlayerMovement : MonoBehaviour {
    private Rigidbody2D rb;
    private Animator animator;

    void Update() {
        float speed = rb.velocity.magnitude;
        animator.SetFloat("Speed", speed);

        bool isGrounded = CheckGrounded();
        animator.SetBool("IsGrounded", isGrounded);
    }
}
```

### **Animation Events**
```csharp
public class CharacterAnimator : MonoBehaviour {
    [SerializeField] private AudioSource audioSource;
    [SerializeField] private AudioClip footstepSound;
    [SerializeField] private AudioClip attackSound;

    public void OnFootstep() {
        audioSource.PlayOneShot(footstepSound);
    }

    public void OnAttackHit() {
        audioSource.PlayOneShot(attackSound);
        // Deal damage to enemies in range
    }

    public void OnAnimationComplete() {
        // Return to idle state
        animator.SetTrigger("Idle");
    }
}
```

## âš¡ Performance Tips

### **Animation Optimization**
- Use **Sprite Atlas** for multiple sprites
- Keep **Pixels Per Unit** consistent
- Use **Tight** mesh type for better batching
- Limit **Sorting Layers** to essential ones
- Use **Animation Compression** for large clips

### **State Machine Optimization**
- Use **Has Exit Time** for smooth transitions
- Set appropriate **Transition Duration**
- Use **Any State** sparingly
- Group related states in **Sub-State Machines**

## ðŸ”§ Troubleshooting

### **Common Issues**
- **Animation not playing**: Check Animator Controller assignment
- **Transitions not working**: Verify parameter conditions
- **Events not firing**: Check Animation Event setup
- **Flipping issues**: Use SpriteRenderer.flipX instead of negative scale

### **Debug Tips**
- Use **Animator Window** to visualize state machine
- Use **Animation Window** to set up events
- Use **Debug.Log()** in animation event methods
- Use **Animator.GetCurrentAnimatorStateInfo()** for state info

---

**Next**: Learn about [Physics Update Order](./physics_update_order.md) for collision systems
