# Unity Game Loop & Execution Order

## ğŸ¯ Overview

This diagram illustrates Unity's core execution model, showing how GameObjects and components are processed each frame, and the order of different update methods.

## ğŸ“Š Game Loop Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Unity Game Loop                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frame Start                              â”‚
â”‚  â€¢ Input Processing                                         â”‚
â”‚  â€¢ Physics Simulation (FixedUpdate)                        â”‚
â”‚  â€¢ Game Logic (Update)                                     â”‚
â”‚  â€¢ Rendering (LateUpdate)                                  â”‚
â”‚  â€¢ UI Rendering                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                MonoBehaviour Lifecycle                     â”‚
â”‚                                                             â”‚
â”‚  Awake() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  OnEnable() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  Start() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚   â”‚
â”‚    â”‚                                           â”‚ â”‚  â”‚   â”‚
â”‚    â–¼                                           â”‚ â”‚  â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚            Frame Loop                   â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  FixedUpdate() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â”‚                                 â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â–¼                                 â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Physics Calculations                â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Rigidbody Movement                  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Collision Detection                 â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚                                     â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Update() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â”‚                             â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â–¼                             â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Input Handling                   â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Game Logic                       â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  UI Updates                       â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚                                   â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  LateUpdate() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â”‚                           â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â–¼                           â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Camera Follow                  â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  UI Positioning                 â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Post-Processing                â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚                                 â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  OnGUI() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â”‚                         â”‚ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚    â–¼                         â”‚ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Debug UI                    â”‚ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚  Editor Tools                â”‚ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â”‚                              â”‚ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚                                   â”‚  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚                                       â”‚  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚                                           â”‚  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚ â”‚  â”‚   â”‚
â”‚                                               â”‚   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚   â”‚
â”‚                                                   â”‚ â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚   â”‚
â”‚                                                     â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frame End                                â”‚
â”‚  â€¢ Rendering Complete                                       â”‚
â”‚  â€¢ Wait for Next Frame                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Execution Order Details

### **Awake()**
- Called when GameObject is created
- Called before Start, even if GameObject is disabled
- Use for: Component references, initialization
- **Example**: `GetComponent<Rigidbody2D>()`, setting up references

### **OnEnable()**
- Called when GameObject becomes active
- Called every time GameObject is enabled
- Use for: Event subscriptions, UI setup
- **Example**: `InputAction.performed += OnJump`

### **Start()**
- Called once before first Update
- Called after all Awake() calls
- Use for: Initialization that depends on other objects
- **Example**: Setting initial position, starting coroutines

### **FixedUpdate()**
- Called at fixed intervals (default: 50 FPS)
- Independent of frame rate
- Use for: Physics calculations, Rigidbody movement
- **Example**: `rigidbody2D.velocity = new Vector2(speed, 0)`

### **Update()**
- Called every frame
- Frame rate dependent
- Use for: Input handling, game logic, UI updates
- **Example**: `if (Input.GetKeyDown(KeyCode.Space)) Jump()`

### **LateUpdate()**
- Called after all Update() calls
- Use for: Camera follow, UI positioning
- **Example**: `camera.transform.position = player.transform.position + offset`

### **OnGUI()**
- Called multiple times per frame
- Use for: Debug UI, editor tools
- **Example**: `GUI.Label(new Rect(10, 10, 100, 20), "Debug Info")`

## âš¡ Performance Considerations

### **Update vs FixedUpdate**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Update Timing                            â”‚
â”‚                                                             â”‚
â”‚  Update() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                                   â”‚   â”‚
â”‚    â–¼                                                   â”‚   â”‚
â”‚  â€¢ Input Handling (every frame)                        â”‚   â”‚
â”‚  â€¢ Game Logic (every frame)                            â”‚   â”‚
â”‚  â€¢ UI Updates (every frame)                            â”‚   â”‚
â”‚  â€¢ Animation (every frame)                             â”‚   â”‚
â”‚                                                         â”‚   â”‚
â”‚  FixedUpdate() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚    â”‚                                               â”‚  â”‚   â”‚
â”‚    â–¼                                               â”‚  â”‚   â”‚
â”‚  â€¢ Physics Calculations (50 FPS)                   â”‚  â”‚   â”‚
â”‚  â€¢ Rigidbody Movement (50 FPS)                     â”‚  â”‚   â”‚
â”‚  â€¢ Collision Detection (50 FPS)                    â”‚  â”‚   â”‚
â”‚                                                    â”‚  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Best Practices**
- **Use FixedUpdate()** for physics-related code
- **Use Update()** for input and game logic
- **Use LateUpdate()** for camera follow and UI positioning
- **Avoid expensive operations** in Update() loops
- **Use coroutines** for time-based operations

## ğŸ® Common Patterns

### **Player Controller Pattern**
```csharp
public class PlayerController : MonoBehaviour {
    void Update() {
        // Input handling
        HandleInput();
    }

    void FixedUpdate() {
        // Physics movement
        MovePlayer();
    }

    void LateUpdate() {
        // Camera follow
        UpdateCamera();
    }
}
```

### **State Machine Pattern**
```csharp
public class GameStateManager : MonoBehaviour {
    void Update() {
        switch (currentState) {
            case GameState.Playing:
                UpdateGameplay();
                break;
            case GameState.Paused:
                UpdatePauseMenu();
                break;
        }
    }
}
```

## ğŸ”§ Troubleshooting

### **Common Issues**
- **Physics jitter**: Use FixedUpdate() for physics
- **Input lag**: Use Update() for input handling
- **Camera stuttering**: Use LateUpdate() for camera follow
- **Performance issues**: Profile Update() methods

### **Debug Tips**
- Use `Debug.Log()` to track execution order
- Use Unity Profiler to identify performance bottlenecks
- Use `Time.deltaTime` for frame-rate independent movement
- Use `Time.fixedDeltaTime` for physics calculations

---

**Next**: Learn about [Animation Flow](./animation_flow.md) for character animation systems
